@model AlaskaAirlines.ViewModels.SearchViewModel

@{
    ViewBag.Title = "Search";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="panel panel-default" style="margin: 0 5% 0 5%;">
    <div class="panel-body">
        <div class="text-center">
            <h1>
                @Model.FromAirport
                <img src="~/Content/icons/arrow-pointing-to-right.png" style="max-height: 50px; margin: 0 15px 0 15px; padding: 0;" />
                @Model.ToAirport
            </h1>
        </div>
    </div>
</div>


<div class="progress progress-striped" style="margin: 0 5% 0 5%;">
    <div class="progress-bar progress-bar-success" style="width: 100%"></div>
</div>

@if (Model.Flights.Count == 0)
{
    <div class="panel panel-warning" style="margin: 5% 30% 0 30%;">
        <div class="panel-body">
            <h4 style="float: left;">
                No flights available. Please pick different airports.
            </h4>

            <a href="/" class="btn btn-info" style="float: right" ;>Go Back</a>

        </div>
    </div>
}
else
{
    <div class="panel panel-default">
        <div class="panel-body" style="padding: 0;">
            <ul class="pager" style="font-size: larger; font-weight: 800; margin: 3% 5% 3% 5%; float: right;">
                <li style="margin-right: 10px;">Sort results by</li>
                <li>
                    @Html.ActionLink(
                   "Flight",
                   "Availability",
                   "Flights",
                   new { fromAirport = Model.FromAirport, toAirport = Model.ToAirport, sortBy = ViewBag.SortByFlight },
                   new { @class = "SortButton" })
                </li>
                
                <li>
                    @Html.ActionLink(
                   "Departure",
                   "Availability",
                   "Flights",
                   new { fromAirport = Model.FromAirport, toAirport = Model.ToAirport, sortBy = ViewBag.SortByDeparture },
                   new { @class = "SortButton" })
                </li>
                
                <li>
                @Html.ActionLink(
                   "Price",
                   "Availability",
                   "Flights",
                   new { fromAirport = Model.FromAirport, toAirport = Model.ToAirport, sortBy = ViewBag.SortByPrice },
                   new { @class = "SortButton" })
                </li>
            </ul>
        </div>
    </div>

    <table class="table table-striped table-hover" style="width: 80%; text-align:center; margin: 0 10% 0 10%; font-size: x-large;">
        <thead>
            <tr class="panel" style="background-color: #2c3e50; color: #f9f9f9;">
                <th>Flight #</th>
                <th></th>
                <th></th>
                <th></th>
                <th>Main Cabin</th>
                <th>First Class</th>
            </tr>
        </thead>
        <tbody>
            @{
                foreach (var flight in Model.Flights)
                {
                    var departureTime = flight.Departs.ToString("hh:mm tt");
                    var arrivalTime = flight.Arrives.ToString("hh:mm tt");
                    <tr>
                        <td>
                            @flight.FlightNumber
                        </td>
                        <td>
                            <b>@departureTime</b> <small>(@flight.From)</small>
                        </td>
                        <td style="width: 200px; padding-top: 30px; padding-bottom: 0;">
                            <div class="progress">
                                <div class="progress-bar progress-bar-warning" style="width: 100%;"></div>
                            </div>
                        </td>
                        <td>
                            <b>@arrivalTime</b> <small>(@flight.To)</small>
                        </td>
                        <td style="font-weight: 600;">
                            USD @flight.MainCabinPrice
                        </td>
                        <td style="font-weight: 600;">
                            USD @flight.FirstClassPrice
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>
}
